<html>
<script>
function renderCinemaTheaters(data) {
		// JAX-RS serializes an empty list as null, and a 'collection of one' as an object (not an 'array of one')
		var list = data == null ? []
				: (data instanceof Array ? data : [ data ]);
		cinemas = list;
		$.each(list, function(index, cinema) {
			var ind = index + 1;
			var html_string = '<div class="panel panel-default"><div class="panel-heading">'+
						'<h4 class="panel-title"><a data-toggle="collapse" data-parent="#accordion" href="#collapse'+ind+'">'+cinema.name+
						'</a></h4></div><div id="collapse'+ind+'" class="panel-collapse collapse"><div class="panel-body">'+
						'<a href="cinema_profile.html?'+cinema.id+'" style="float:right">Visit profile</a>'+cinema.description+
						'<br/>'+cinema.address;
				
			if(cinema.isCinema == true){
				$('#cinemas_list').append(html_string);
			}else{
				$('#theatres_list').append(html_string);
			}
	        
		});
		
	}

	function getCinemas() {
		console.log("ready!");
		$.ajax({
			type : 'GET',
			url : 'http://localhost:8080/load_cinemas',
			dataType : "json", // data type of response
			success : renderCinemaTheaters,
		});
	}

	function showCinemaList() {
		$('#cinemas').modal('show');
	}

	function showTheatreList() {
		$('#theatres').modal('show');
	}

	getCinemas();
</script>
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<script
	src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script
	src="https://maps.googleapis.com/maps/api/js?v=3.exp&libraries=drawing&key=AIzaSyAro0psoaV4dA4AkTSUm7TXt_bO9Nf1sB4"></script>
<script type="text/javascript" src="resources/js/site_functions.js"></script>
<script type="text/javascript" src="resources/js/adminct.js"></script>
<link rel="stylesheet" href="resources/css/styles.css"><body>
		<nav class="navbar navbar-inverse">
		  <div class="container-fluid">
		    <div class="navbar-header">
		      <a class="navbar-brand" href="#">Cinemas and Theaters</a>
		    </div>
			<ul class="nav navbar-nav"> <li><a class="nav-link" href="fan_page.html">Fan Zone</a></li></ul>
		    <ul class="nav navbar-nav" id="navbarLeft">
		    <li><button type="button" class="btn btn-link navbar-btn admin_ct" data-toggle="modal" data-target="#modal_add_cinema">Add Cinema/Theatre</button></li>
			<li><button type="button" class="btn btn-link navbar-btn admin_sys" data-toggle="modal" data-target="#modal_add_admin">Add admin</button></li>
		    </ul>
		    <ul class="nav navbar-nav navbar-right" id="navbarRight">
			<li><a href="userProfile.html" class="user"><span class="glyphicon glyphicon-profile"></span> My profile</a></li>
			<li><a href="reg.html" class="user_not_logged"><span class="glyphicon glyphicon-user"></span> Sign Up</a></li>
			<li><a href="signin.html" class="user_not_logged"><span class="glyphicon glyphicon-log-in"></span> Login</a></li>
			<li><a href="javascript:log_out();" class="user admin_sys admin_fan admin_ct"><span class="glyphicon glyphicon-log-out"></span> Log out</a></li>
		    </ul>
		  </div>
		</nav>

	<div class="container">

		<div class="row">
			<div class="col-md-4">
				<div class="thumbnail">
					<a href="javascript:showCinemaList();"> <img
						src="resources/images/cinema.jpg" alt="Cinema"
						style="width: 100%; height: 240px">
						<div class="caption">
							<p>List of cinemas</p>
						</div>
					</a>
				</div>
			</div>
			<div class="col-md-4">
				<div class="thumbnail">
					<a href="javascript:showTheatreList();"> <img
						src="resources/images/theatre.jpg" alt="Theatre"
						style="width: 100%; height: 240px">
						<div class="caption">
							<p>List of theatres</p>
						</div>
					</a>
				</div>
			</div>


		</div>

		<div id="modal_add_cinema" class="modal fade" role="dialog">
			<div class="modal-dialog">

				<div class="modal-content">
					<div class="modal-body">
						<h3>Add Cinema/Theatre</h3>
						<form role="form" id="add_cinema_form" method="POST">
							<div class="form-group">
								<label for="cinema_name">Name</label> <input type="text"
									class="form-control" id="cinema_name" required />
							</div>
							<div class="form-group">
								<label for="cinema_address">Address</label> <input type="text"
									class="form-control" id="cinema_address" required />
							</div>
							<div class="form-group">
								<label for="cinema_description">Description</label>
								<textarea class="form-control" rows="3" id="cinema_description"
									required></textarea>
							</div>
							<div class="form-group">
								<label for="is_cinema_radio">Type</label>
								<div class="radio">
									<label><input type="radio" name="is_cinema_radio"
										value="true" checked="checked">Cinema</label>
								</div>
								<div class="radio">
									<label><input type="radio" name="is_cinema_radio"
										value="false">Theater</label>
								</div>
							</div>
							<h4>Add Hall</h4>
							<div class="form-group">
								<label for="cinema_rows">Number of rows</label> <input
									type="number" class="form-control" id="cinema_rows" />
							</div>
							<div class="form-group">
								<label for="cinema_columns">Number of columns</label> <input
									type="number" class="form-control" id="cinema_columns" />
							</div>
							<button type="button" class="btn btn-primary"
								id="cinema_hall_add" onclick="cinemaHallAdd()">Add hall</button>
							<div class="form-group">
								<table class="table" id="cinema_halls">
									<thead>
										<tr>
											<th>Rows</th>
											<th>Columns</th>
											<th><br></th>
										</tr>
									</thead>
									<tbody id="cinema_hall_body">
									</tbody>
								</table>
							</div>
							<button class="btn btn-primary" id="cinema_add">Add</button>
						</form>
						<div class="modal-footer">
							<button type="button" class="btn btn-default"
								data-dismiss="modal">Close</button>
						</div>
					</div>
				</div>
			</div>
		</div>

		<div id="modal_add_admin" class="modal fade" role="dialog">
			<div class="modal-dialog">

				<div class="modal-content">
					<div class="modal-body">
						<img class="profile-img" id="add_admin_profile-img"
							src="https://lh5.googleusercontent.com/-b0-k99FZlyE/AAAAAAAAAAI/AAAAAAAAAAA/eu7opA4byxI/photo.jpg?sz=120"
							alt="">
						<h3>Add Admin</h3>
						<form role="form" id="form_add_admin" method="POST">
							<div class="form-group">
								<label for="add_admin_email">Email</label> <input type="email"
									class="form-control" id="add_admin_email" required />
								<p id="add_admin_message-email"></p>
							</div>
							<div class="form-group">
								<!--<a class="pull-right" href="#">Forgot password?</a>!-->
								<label for="add_admin_password">Password</label> <input
									type="password" class="form-control" id="add_admin_password"
									required />
							</div>
							<div class="form-group">
								<!--<a class="pull-right" href="#">Forgot password?</a>!-->
								<label for="add_admin_r-password">Repeat password</label> <input
									type="password" class="form-control" id="add_admin_r-password"
									required />
								<p id="add_admin_message"></p>
							</div>
							<div class="form-group">
								<label for="add_admin_name">Name</label> <input type="text"
									class="form-control" id="add_admin_name" required />
							</div>
							<div class="form-group">
								<label for="add_admin_surname">Surname</label> <input
									type="text" class="form-control" id="add_admin_surname"
									required />
							</div>
							<div class="form-group">
								<label for="add_admin_city">City</label> <input type="text"
									class="form-control" id="add_admin_city" required />
							</div>
							<div class="form-group">
								<label for="add_admin_phone">Phone</label> <input type="text"
									class="form-control" id="add_admin_phone" required />
							</div>
							<div class="form-group">
								<label for="profile-picture">Profile picture</label> <input
									type="file" class="form-control-file" id="add_admin_file">
							</div>
							<div class="form-group">
								<label for="is_cinema_radio">Admin type</label>
								<div class="radio">
									<label><input type="radio" name="admin_type_radio"
										value="sys" checked="checked">System</label>
								</div>
								<div class="radio">
									<label><input type="radio" name="admin_type_radio"
										value="ct">Theater/Cinema</label>
								</div>
								<div class="radio">
									<label><input type="radio" name="admin_type_radio"
										value="fan">Fan zone</label>
								</div>
							</div>
							<button type="submit" class="btn btn btn-primary"
								id="add_admin_register">Add admin</button>
						</form>

						<div class="modal-footer">
							<button type="button" class="btn btn-default"
								data-dismiss="modal">Close</button>
						</div>
					</div>
				</div>
			</div>
		</div>



		<div class="modal fade" id="cinemas" tabindex="-1" role="dialog"
			aria-labelledby="exampleModalLabel" aria-hidden="true">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title" id="exampleModalLabel">Cinema list</h5>
						<button type="button" class="close" data-dismiss="modal"
							aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
					</div>
					<div class="modal-body">
						<div class="panel-group" id="cinemas_list"></div>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn" data-dismiss="modal">Close</button>
					</div>
				</div>
			</div>
		</div>

		<div class="modal fade" id="theatres" tabindex="-1" role="dialog"
			aria-labelledby="exampleModalLabel" aria-hidden="true">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title" id="exampleModalLabel">Theatre list</h5>
						<button type="button" class="close" data-dismiss="modal"
							aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
					</div>
					<div class="modal-body">
						<div class="panel-group" id="theatres_list"></div>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn" data-dismiss="modal">Close</button>
					</div>
				</div>
			</div>
		</div>

	</div>
</body>

<script type="text/javascript">
	check_user();
</script>
</div>
</div>
</div>

</html>