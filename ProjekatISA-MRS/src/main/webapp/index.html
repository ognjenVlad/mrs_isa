<html>

<head>

<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<script
	src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<link href="resources/css/popup_windows.css" rel="stylesheet" />
<link href="resources/css/styles.css" rel="stylesheet" />
<script type="text/javascript" src="resources/js/popup_control.js"></script>
<script type="text/javascript" src="resources/js/adminct.js"></script>
<link rel="stylesheet" href="resources/css/startpage.css">

<title>Tim12 Cogi</title>

</head>
<script type="text/javascript">
	function renderCinemaTheaters(data) {
		// JAX-RS serializes an empty list as null, and a 'collection of one' as an object (not an 'array of one')
		var list = data == null ? []
				: (data instanceof Array ? data : [ data ]);
		cinemas = list;
		$.each(list, function(index, cinema) {
			if (cinema.isCinema == true) {
				$('#cinemas').append(
						"<a class=\"cinthe_list\" href=\"javascript:showDetails();\">"
								+ cinema.name + "</a>");
			} else {
				$('#theatres').append(
						"<a class=\"cinthe_list\" href=\"javascript:showDetails();\">"
								+ cinema.name + "</a>");
			}

		});

	}

	function getCinemas() {
		console.log("ready!");
		$.ajax({
			type : 'GET',
			url : 'http://localhost:8080/load_cinemas',
			dataType : "json", // data type of response
			success : renderCinemaTheaters,
		});
	}

	function showCinemaList() {
		$('#cinemas')[0].style.display = "block";
	}

	function showTheatreList() {
		$('#theatres')[0].style.display = "block";
	}

	function closeList(event) {
		var cinthe_list = $('.cinthe_list');
		var cinthe_details = $('.cinthe_details');
		if ($.inArray(event.target, cinthe_list) == -1) {
			$('#cinemas')[0].style.display = "none";
			$('#theatres')[0].style.display = "none";
		}
		if ($.inArray(event.target, cinthe_details) == -1) {
			$('.cinthe_details')[0].style.display = "none";
		}
	}

	function showDetails() {
		$('.cinthe_details').empty();
		$('.cinthe_details').append("<p>Cinema/Theatre</p>");
		$('.cinthe_details')[0].style.display = "block";
	}

	getCinemas();
</script>
<body onclick="closeList(event);">
	<div class="container">
		<button type="button" class="btn " data-toggle="modal"
			data-target="#modal_add_cinema">Add Cinema/Theatre</button>
		<button type="button" class="btn " data-toggle="modal"
			data-target="#modal_add_admin">Add admin</button>

		<div id="modal_add_cinema" class="modal fade" role="dialog">
			<div class="modal-dialog">

				<div class="modal-content">
					<div class="modal-body">
						<h3>Add Cinema/Theatre</h3>
						<form role="form" id="add_cinema_form" method="POST">
							<div class="form-group">
								<label for="cinema_name">Name</label> <input type="text"
									class="form-control" id="cinema_name" required />
							</div>
							<div class="form-group">
								<label for="cinema_address">Address</label> <input type="text"
									class="form-control" id="cinema_address" required />
							</div>
							<div class="form-group">
								<label for="cinema_description">Description</label>
								<textarea class="form-control" rows="3" id="cinema_description"
									required></textarea>
							</div>
							<div class="form-group">
								<label for="is_cinema_radio">Type</label>
								<div class="radio">
									<label><input type="radio" name="is_cinema_radio"
										value="true" checked="checked">Cinema</label>
								</div>
								<div class="radio">
									<label><input type="radio" name="is_cinema_radio"
										value="false">Theater</label>
								</div>
							</div>
							<h4>Add Hall</h4>
							<div class="form-group">
								<label for="cinema_rows">Number of rows</label> <input
									type="number" class="form-control" id="cinema_rows" />
							</div>
							<div class="form-group">
								<label for="cinema_columns">Number of columns</label> <input
									type="number" class="form-control" id="cinema_columns" />
							</div>
							<button type="button" class="btn btn-primary"
								id="cinema_hall_add" onclick="cinemaHallAdd()">Add hall</button>
							<div class="form-group">
								<table class="table" id="cinema_halls">
									<thead>
										<tr>
											<th>Rows</th>
											<th>Columns</th>
											<th><br></th>
										</tr>
									</thead>
									<tbody id="cinema_hall_body">
									</tbody>
								</table>
							</div>
							<button class="btn btn-primary" id="cinema_add">Add</button>
						</form>
						<div class="modal-footer">
							<button type="button" class="btn btn-default"
								data-dismiss="modal">Close</button>
						</div>
					</div>
				</div>
			</div>
		</div>

		<div id="modal_add_admin" class="modal fade" role="dialog">
			<div class="modal-dialog">

				<div class="modal-content">
					<div class="modal-body">
						<img class="profile-img" id="add_admin_profile-img"
							src="https://lh5.googleusercontent.com/-b0-k99FZlyE/AAAAAAAAAAI/AAAAAAAAAAA/eu7opA4byxI/photo.jpg?sz=120"
							alt="">
						<h3>Add Admin</h3>
						<form role="form" id="form_add_admin" method="POST">
							<div class="form-group">
								<label for="add_admin_email">Email</label> <input type="email"
									class="form-control" id="add_admin_email" required />
								<p id="add_admin_message-email"></p>
							</div>
							<div class="form-group">
								<!--<a class="pull-right" href="#">Forgot password?</a>!-->
								<label for="add_admin_password">Password</label> <input
									type="password" class="form-control" id="add_admin_password"
									required />
							</div>
							<div class="form-group">
								<!--<a class="pull-right" href="#">Forgot password?</a>!-->
								<label for="add_admin_r-password">Repeat password</label> <input
									type="password" class="form-control" id="add_admin_r-password"
									required />
								<p id="add_admin_message"></p>
							</div>
							<div class="form-group">
								<label for="add_admin_name">Name</label> <input type="text"
									class="form-control" id="add_admin_name" required />
							</div>
							<div class="form-group">
								<label for="add_admin_surname">Surname</label> <input
									type="text" class="form-control" id="add_admin_surname"
									required />
							</div>
							<div class="form-group">
								<label for="add_admin_city">City</label> <input type="text"
									class="form-control" id="add_admin_city" required />
							</div>
							<div class="form-group">
								<label for="add_admin_phone">Phone</label> <input type="text"
									class="form-control" id="add_admin_phone" required />
							</div>
							<div class="form-group">
								<label for="profile-picture">Profile picture</label> <input
									type="file" class="form-control-file" id="add_admin_file">
							</div>
							<div class="form-group">
								<label for="is_cinema_radio">Admin type</label>
								<div class="radio">
									<label><input type="radio" name="admin_type_radio"
										value="sys" checked="checked">System</label>
								</div>
								<div class="radio">
									<label><input type="radio" name="admin_type_radio"
										value="ct">Theater/Cinema</label>
								</div>
								<div class="radio">
									<label><input type="radio" name="admin_type_radio"
										value="fan">Fan zone</label>
								</div>
							</div>
							<button type="submit" class="btn btn btn-primary"
								id="add_admin_register">Add admin</button>
						</form>

						<div class="modal-footer">
							<button type="button" class="btn btn-default"
								data-dismiss="modal">Close</button>
						</div>
					</div>
				</div>
			</div>
		</div>

		<div id="popup_admin_add">
			<table>
				<tr>
					<td>Username:</td>
					<td><input type="text" name="username" id="admin_username" /></td>
				</tr>
				<tr>
					<td>Password:</td>
					<td><input type="password" name="passowrd" id="admin_password" /></td>
				</tr>
				<tr>
					<td>
						<form action="" id="admin_type_input">
							<input type="radio" name="admin_type" value="system">System<br>
							<input type="radio" name="admin_type" value="cinema_theater">Cinema/Theater<br>
							<input type="radio" name="admin_type" value="fan_zone">
							Fan Zone
						</form>
					</td>
				</tr>
				<tr>
					<td>
						<button type="button" id="create_cinema" onclick="">Add</button>
					</td>
					<td><button type="button" onclick="closePopups()">Cancel</button></td>
				</tr>
			</table>
		</div>

		<div class="header">
			<a href="" class="logo">Movies and Shows</a>
			<div class="header-right">
				<a href="reg.html">Registracija</a> <a href="signin.html">Log in</a>
			</div>

		</div>

		<div id="cinthe">
			<a class="cinthe" href="javascript:showCinemaList();">
				<div class="cinthe">
					<img class="cinthe" src="resources/images/cinema.jpg">
					<p>CINEMAS</p>
				</div>
			</a> <a class="cinthe" href="javascript:showTheatreList();">
				<div class="cinthe">
					<img class="cinthe" src="resources/images/theatre.jpg">
					<p>THEATRES</p>
				</div>
			</a>
		</div>

		<div class="cinthe_list" id="cinemas"></div>

		<div class="cinthe_list" id="theatres"></div>

		<div class="cinthe_details"></div>
	</div>
</body>

</html>